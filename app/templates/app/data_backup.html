<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Favicon ä»£ç  -->
    <link rel="icon" type="image/x-icon" href="{% static 'booking_system/favicon/favicon.ico' %}">
    <link rel="icon" type="image/svg+xml" href="{% static 'booking_system/favicon/favicon.svg' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'booking_system/favicon/favicon-96x96.png' %}">
    <link rel="apple-touch-icon" href="{% static 'booking_system/favicon/apple-touch-icon.png' %}">
    <link rel="manifest" href="{% static 'booking_system/favicon/doctor_site.webmanifest' %}">
    <meta name="theme-color" content="#ffffff">

    <title>å¤‡ä»½ä¸æ¢å¤ - ç¼¥ç¼ˆæ—…</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        .doctor-container {
            display: flex;
            min-height: 100vh;
        }

        /* ä¾§è¾¹æ æ ·å¼ï¼ˆä¸doctor_index.htmlä¿æŒä¸€è‡´ï¼‰ */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100vh;
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar h2 {
            text-align: center;
            color: #ecf0f1;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #34495e;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar-menu li {
            margin: 0;
        }

        .sidebar-menu a {
            display: block;
            padding: 15px 25px;
            color: #ecf0f1;
            text-decoration: none;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }

        .sidebar-menu a:hover {
            background-color: #34495e;
            border-left: 4px solid #3498db;
        }

        .sidebar-menu a.active {
            background-color: #34495e;
            border-left: 4px solid #2ecc71;
            font-weight: bold;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            margin-left: 250px;
            min-height: 100vh;
        }

        .backup-header {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .backup-header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        /* æ“ä½œå¡ç‰‡ */
        .action-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .action-card {
            background: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .action-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .action-card p {
            color: #7f8c8d;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #2ecc71;
            color: white;
        }

        .btn-primary:hover {
            background: #27ae60;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-warning:hover {
            background: #d68910;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        /* å¤‡ä»½æ–‡ä»¶åˆ—è¡¨ */
        .backup-list {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .backup-list h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .backup-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 6px;
            margin-bottom: 10px;
            background: #f9f9f9;
        }

        .backup-info {
            flex: 1;
        }

        .backup-name {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .backup-meta {
            font-size: 12px;
            color: #7f8c8d;
        }

        .backup-actions {
            display: flex;
            gap: 10px;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 14px;
        }

        /* ç©ºçŠ¶æ€ */
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #95a5a6;
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .modal-header h3 {
            margin: 0;
            color: #2c3e50;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .close-modal:hover {
            color: #333;
        }

        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }

        input[type="file"] {
            width: 100%;
            padding: 10px;
            border: 2px dashed #ddd;
            border-radius: 4px;
            background: #f9f9f9;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 30px;
        }

        /* è­¦å‘Šæ¡† */
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
            color: #856404;
        }

        .warning-box h4 {
            margin-top: 0;
            color: #856404;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .main-content {
                margin-left: 0;
                padding: 10px;
            }
            
            .action-cards {
                grid-template-columns: 1fr;
            }
            
            .backup-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .backup-actions {
                margin-top: 10px;
                width: 100%;
                justify-content: flex-end;
            }
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 20px 30px 30px;
            border-radius: 8px;
            width: 90%; /* æ”¹ä¸ºç™¾åˆ†æ¯”ï¼Œæ›´å“åº”å¼ */
            max-width: 500px;
            max-height: 80vh; /* é™åˆ¶æœ€å¤§é«˜åº¦ä¸ºè§†å£çš„80% */
            overflow-y: auto; /* æ·»åŠ å‚ç›´æ»šåŠ¨æ¡ */
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            position: relative; /* ç¡®ä¿å­å…ƒç´ å®šä½æ­£ç¡® */
        }

        /* æ¨¡æ€æ¡†å¤´éƒ¨å›ºå®šï¼Œå†…å®¹å¯æ»šåŠ¨ */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
            position: sticky; /* å¤´éƒ¨å›ºå®š */
            top: 0;
            background: white;
            z-index: 10;
        }

        /* æ¨¡æ€æ¡†è¡¨å•åŒºåŸŸ */
        .modal-body {
            max-height: calc(70vh - 100px); /* è®¡ç®—å¯ç”¨é«˜åº¦ */
            overflow-y: auto; /* å†…å®¹è¿‡å¤šæ—¶å¯æ»šåŠ¨ */
        }

        /* ç¡®ä¿è­¦å‘Šæ¡†åœ¨æ¨¡æ€æ¡†å†…æ­£å¸¸æ˜¾ç¤º */
        .modal .warning-box {
            margin: 15px 0;
            max-height: none; /* ç§»é™¤é«˜åº¦é™åˆ¶ */
            overflow: visible;
        }

        /* è¡¨å•æ“ä½œæŒ‰é’®å›ºå®šåˆ°åº•éƒ¨ */
        .modal .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            position: sticky;
            bottom: 0;
            background: white;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .modal-content {
                margin: 5% auto;
                width: 95%;
                max-height: 90vh; /* ç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨æ›´å¤§é«˜åº¦ */
                padding: 15px 20px 20px;
            }
            
            .modal-header {
                padding: 10px 0;
                margin-bottom: 10px;
            }
            
            .modal-header h3 {
                font-size: 18px;
            }
            
            .modal-body {
                max-height: calc(85vh - 120px);
            }
            
            .warning-box {
                padding: 10px;
                margin: 10px 0;
            }
            
            .warning-box h4 {
                font-size: 16px;
            }
            
            .warning-box ul {
                margin: 5px 0 5px 15px;
            }
        }

        /* é’ˆå¯¹å°å±å¹•æ‰‹æœºè¿›ä¸€æ­¥ä¼˜åŒ– */
        @media (max-height: 600px) and (max-width: 768px) {
            .modal-content {
                margin: 2% auto;
                max-height: 96vh;
            }
            
            .modal-body {
                max-height: calc(94vh - 120px);
            }
            
            .form-actions {
                padding: 10px 0;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 14px;
            }
        }

        .sidebar-footer {
            margin-top: auto; /* è¿™å°†æŠŠå†…å®¹æ¨åˆ°ä¾§è¾¹æ åº•éƒ¨ */
            padding: 20px 25px;
            border-top: 1px solid #34495e;
        }

        .logout-form-sidebar {
            width: 100%;
        }

        .logout-btn-sidebar {
            width: 100%;
            background: #e74c3c;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: background 0.3s;
        }

        .logout-btn-sidebar:hover {
            background: #c0392b;
        }
    </style>
</head>
<body>
    <div class="doctor-container">
        <!-- ä¾§è¾¹æ  -->
        <div class="sidebar">
            <h2>å·¥ä½œå°</h2>
            <ul class="sidebar-menu">
                <li><a href="{% url 'doctor_index' %}"><i>ğŸ </i> ä»ªè¡¨æ¿</a></li>
                <li><a href="{% url 'doctor_urge' %}"><i>ğŸ”¥</i> å¤„ç†å‚¬å•
                        {% if urge_count > 0 %}
                        <span
                            style="float: right; background: #e74c3c; color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px;">
                            {{ urge_count }}</span>
                        {% endif %}
                    </a></li>
                <li><a href="{% url 'doctor_respond' %}"><i>ğŸ’¬</i> å›åº”é¢„çº¦
                        {% if unresponded_count > 0 %}
                        <span
                            style="float: right; background: #f39c12; color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px;">
                            {{ unresponded_count }}</span>
                        {% endif %}
                    </a></li>
                <li><a href="{% url 'doctor_process' %}"><i>âš™ï¸</i> å¤„ç†é¢„çº¦
                        {% if unprocessed_count > 0 %}
                        <span
                            style="float: right; background: #3498db; color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px;">
                            {{ unprocessed_count }}</span>
                        {% endif %}
                    </a></li>
                <li><a href="{% url 'doctor_all' %}"><i>ğŸ“‹</i> é¢„çº¦ç®¡ç†</a></li>
                <li><a href="{% url 'patients_info' %}"><i>ğŸ“</i> ç”¨æˆ·æ¡£æ¡ˆ</a></li>
                <li><a href="{% url 'user_accounts' %}"><i>ğŸ‘¥</i> ç”¨æˆ·è´¦æˆ·</a></li>
                <li><a href="{% url 'data_backup' %}" class="active"><i>ğŸ’¾</i> æ•°æ®å¤‡ä»½</a></li>
            </ul>
            <div class="sidebar-footer">
                <form method="post" action="{% url 'logout' %}" class="logout-form-sidebar">
                    {% csrf_token %}
                    <button type="submit" class="logout-btn-sidebar">
                        <i>ğŸšª</i> é€€å‡ºç™»å½•
                    </button>
                </form>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="backup-header">
                <h1>ğŸ“Š æ•°æ®å¤‡ä»½ä¸æ¢å¤</h1>
                <p>ç®¡ç†ç³»ç»Ÿæ•°æ®å¤‡ä»½ï¼Œæ”¯æŒå¤‡ä»½å’Œè¦†ç›–æ¢å¤åŠŸèƒ½</p>
            </div>

            <!-- è­¦å‘Šä¿¡æ¯ -->
            <div class="warning-box">
                <h4>âš ï¸ é‡è¦æé†’</h4>
                <p>
                    1. å¤‡ä»½æ–‡ä»¶åŒ…å«æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼ˆä¸åŒ…æ‹¬åŒ»å¸ˆè´¦å·ï¼‰å’Œæ¡£æ¡ˆä¿¡æ¯<br>
                    2. æ¢å¤æ“ä½œå°†è¦†ç›–ç°æœ‰æ•°æ®ï¼Œå»ºè®®åœ¨æ‰§è¡Œæ¢å¤æ“ä½œå‰å…ˆåˆ›å»ºæ–°çš„å¤‡ä»½
                </p>
            </div>

            <!-- æ“ä½œå¡ç‰‡ -->
            <div class="action-cards">
                <div class="action-card">
                    <h3>ğŸ”„ åˆ›å»ºæ–°å¤‡ä»½</h3>
                    <p>åˆ›å»ºåŒ…å«æ‰€æœ‰ç”¨æˆ·ã€æ¡£æ¡ˆå’Œé¢„çº¦æ•°æ®çš„å®Œæ•´å¤‡ä»½æ–‡ä»¶ã€‚å¤‡ä»½æ–‡ä»¶å°†ä»¥ZIPæ ¼å¼ä¸‹è½½ã€‚</p>
                    <form method="post" action="{% url 'create_backup' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-primary">ç«‹å³å¤‡ä»½</button>
                    </form>
                </div>

                <div class="action-card">
                    <h3>ğŸ“¤ æ¢å¤æ•°æ®</h3>
                    <p>ä»å¤‡ä»½æ–‡ä»¶æ¢å¤æ•°æ®ã€‚è¿™å°†è¦†ç›–ç°æœ‰æ•°æ®ï¼Œè¯·ç¡®ä¿å·²åšå¥½å¤‡ä»½ã€‚</p>
                    <button onclick="showRestoreModal()" class="btn btn-warning">æ¢å¤æ•°æ®</button>
                </div>
            </div>

            <!-- åœ¨ data_backup.html ä¸­æ·»åŠ æ•°æ®åº“ç»Ÿè®¡ä¿¡æ¯ -->
            <div class="database-stats" style="background: white; border-radius: 8px; padding: 20px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                <h3 style="color: #2c3e50; margin-bottom: 15px;">ğŸ“Š å½“å‰æ•°æ®åº“ç»Ÿè®¡</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #3498db;">{{ stats.users|default:0 }}</div>
                        <div style="color: #7f8c8d; font-size: 14px;">æ™®é€šç”¨æˆ·</div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #2ecc71;">{{ stats.appointments|default:0 }}</div>
                        <div style="color: #7f8c8d; font-size: 14px;">é¢„çº¦è®°å½•</div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #9b59b6;">{{ stats.profiles|default:0 }}</div>
                        <div style="color: #7f8c8d; font-size: 14px;">ç”¨æˆ·æ¡£æ¡ˆ</div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #e74c3c;">{{ stats.profile_records|default:0 }}</div>
                        <div style="color: #7f8c8d; font-size: 14px;">æ¡£æ¡ˆè®°å½•</div>
                    </div>
                </div>
            </div>

            <!-- å¤‡ä»½æ–‡ä»¶åˆ—è¡¨ -->
            <div class="backup-list">
                <h3>ğŸ“ ç°æœ‰å¤‡ä»½æ–‡ä»¶</h3>
                
                {% if backups %}
                    {% for backup in backups %}
                    <div class="backup-item">
                        <div class="backup-info">
                            <div class="backup-name">{{ backup.filename }}</div>
                            <div class="backup-meta">
                                å¤§å°: {{ backup.size|filesizeformat }} | 
                                åˆ›å»ºæ—¶é—´: {{ backup.created_time|date:"Y-m-d H:i" }} | 
                                ä¿®æ”¹æ—¶é—´: {{ backup.modified_time|date:"Y-m-d H:i" }}
                            </div>
                        </div>
                        <div class="backup-actions">
                            <a href="{% url 'download_backup' backup.filename %}" class="btn btn-primary btn-sm">ä¸‹è½½</a>
                            <form method="post" action="{% url 'delete_backup' backup.filename %}" 
                                  onsubmit="return confirm('ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ {{ backup.filename }} å—ï¼Ÿ')" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-danger btn-sm">åˆ é™¤</button>
                            </form>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="empty-state">
                        <p>æš‚æ— å¤‡ä»½æ–‡ä»¶</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- æ¢å¤æ•°æ®æ¨¡æ€æ¡† -->
    <div id="restoreModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ¢å¤æ•°æ®</h3>
                <button class="close-modal" onclick="closeRestoreModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <form method="post" action="{% url 'restore_backup' %}" enctype="multipart/form-data" id="restoreForm">
                    {% csrf_token %}
                    <div class="form-group">
                        <label>é€‰æ‹©å¤‡ä»½æ–‡ä»¶ï¼ˆZIPæ ¼å¼ï¼‰</label>
                        <input type="file" name="backup_file" accept=".zip" required>
                        <small style="color: #7f8c8d; display: block; margin-top: 5px;">
                            è¯·é€‰æ‹©ä¹‹å‰åˆ›å»ºçš„å¤‡ä»½æ–‡ä»¶ï¼ˆ.zipæ ¼å¼ï¼‰
                        </small>
                    </div>
                    
                    <div class="warning-box">
                        <h4>âš ï¸ è­¦å‘Šï¼šæ­¤æ“ä½œä¸å¯é€†ï¼</h4>
                        <p>æ¢å¤æ“ä½œå°†ï¼š<strong>è¦†ç›–å½“å‰æ‰€æœ‰éç®¡ç†å‘˜æ•°æ®</strong></p>
                        <p>è¯·ç¡®ä¿æ‚¨å·²äº†è§£è¿™äº›é£é™©ã€‚</p>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="confirmCheckbox" required> 
                            æˆ‘äº†è§£æ¢å¤æ“ä½œå°†è¦†ç›–ç°æœ‰æ•°æ®ï¼Œå¹¶å·²åšå¥½å¤‡ä»½
                        </label>
                    </div>
                </form>
            </div>
            
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="closeRestoreModal()">å–æ¶ˆ</button>
                <button type="submit" form="restoreForm" class="btn btn-warning">ç¡®è®¤æ¢å¤</button>
            </div>
        </div>
    </div>

    <!-- å¤‡ä»½è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="backupInfoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>å¤‡ä»½æ–‡ä»¶è¯¦æƒ…</h3>
                <button class="close-modal" onclick="closeBackupInfoModal()">&times;</button>
            </div>
            <div id="backupInfoContent">
                <!-- åŠ¨æ€åŠ è½½çš„å¤‡ä»½ä¿¡æ¯ -->
            </div>
        </div>
    </div>

    <script>
        // æ¢å¤æ¨¡æ€æ¡†æ§åˆ¶
        function showRestoreModal() {
            document.getElementById('restoreModal').style.display = 'block';
            // é‡ç½®è¡¨å•çŠ¶æ€
            document.getElementById('restoreForm').reset();
            document.getElementById('confirmCheckbox').checked = false;
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            const modalContent = document.querySelector('#restoreModal .modal-content');
            modalContent.scrollTop = 0;
        }

        function closeRestoreModal() {
            document.getElementById('restoreModal').style.display = 'none';
        }

        // å¤‡ä»½è¯¦æƒ…æ¨¡æ€æ¡†æ§åˆ¶
        function showBackupInfo(filename) {
            // è·å–å¤‡ä»½æ–‡ä»¶ä¿¡æ¯
            fetch(`/doctor/backup-info/${filename}/`)
                .then(response => response.json())
                .then(data => {
                    // ... ç°æœ‰çš„å¤‡ä»½è¯¦æƒ…ä»£ç ä¿æŒä¸å˜ ...
                });
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const restoreModal = document.getElementById('restoreModal');
            const backupInfoModal = document.getElementById('backupInfoModal');
            
            if (event.target === restoreModal) {
                closeRestoreModal();
            }
            if (event.target === backupInfoModal) {
                closeBackupInfoModal();
            }
        }

        // ESCé”®å…³é—­æ¨¡æ€æ¡†
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeRestoreModal();
                closeBackupInfoModal();
            }
        });
     
        function closeBackupInfoModal() {
            document.getElementById('backupInfoModal').style.display = 'none';
        }

    </script>
</body>
</html>